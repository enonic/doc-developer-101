= Content and content types
:toc: right
:imagesdir: media
:experimental:
:document: chapter
:xp-url: http://localhost:8080
:cs-url: {xp-url}/admin/tool/com.enonic.app.contentstudio/main
:project-name: com.gettingstarted.content

In this {document}, we'll start exploring how to create and expose content from your XP instance. To achieve this, we'll create a new application and generate a GraphQL API, and we'll learn about _content types_.

However, before we can get going with the application, we'll prepare our sandbox by installing Content Studio -- XP's content authoring suite. We'll be seeing a lot of Content Studio going forwards, so make sure you get it installed and ready to go.

== Preparing your sandbox

As we've seen previously, having a locally running sandbox is essential for XP development, so either spin up your sandbox from earlier or create a new one.

If you already have a sandbox that you want to use, you can use the command

  enonic sandbox start

The CLI will prompt you for which sandbox you want to start. If you're following along from the previous {document}, feel free to use the `tutorial` sandbox we created there.

If you don't have a sandbox set up, follow the xref:basics#_sandboxes[setup steps in the previous {document}] to set up a sandbox and then come back here.

Once your sandbox is up and running, navigate to the admin dashboard at {xp-url}. If you followed the steps in the xref:basics#_admin-console[admin console section of the previous {document}], you should already have installed Content Studio, and it should show up in the XP menu on the right.

NOTE: If there is no XP menu on the right-hand side of the window, you can open it by clicking the XP button in the top right corner.

If you did not install Content Studio previously, choose one of the below options to install it now:

- take the "XP tour" by clicking the XP tour button on the admin home screen. At the final step of this short tour, you will be prompted to be installed a few applications, including content studio.
- navigate to the "Applications" menu entry in the XP menu. Once on the Applications page, click the "Install" button and search for Content Studio in the popup menu. Be aware that you want "Content Studio" and _not_ "Content Studio+".

When you've got Content Studio up and ready to go, find Content Studio in the XP menu and follow the link. Alternatively, you can also find it at {cs-url}[at its own URL] if everything's been installed and is running correctly.

.The XP menu with Content Studio installed
image::xp-menu-content-studio.png[The XP menu, open, with Content Studio listed as an application.]

=== The empty studio (204 No content)

When opening Content Studio, you might find that it's telling you that "you are wasting this space".

.An empty Content Studio
image::content-studio-empty.png[What Content Studio looks like when it's completely empty.]

We can't select anything if we don't have any content. But we also can't create content if we don't have any applications that provide https://developer.enonic.com/docs/xp/stable/cms/content-types[_content types_]. That's because applications dictate what types of content they can work with, and we don't have any applications that provide content types yet. To fix this, let's create a project!

WARNING:  What determines whether an application can be selected when creating a site in CS? For instance, data toolbox and live trace don't show up as options in the Applications dropdown. The vanilla example also does not show up. Is that because it doesn't have any content types?

== Create a headless API project

To demonstrate how to work with content in XP, we'll create a new project. Using the headless CMS starter, we also get a fully functional GraphQL API without any additional work.

We've already covered how to create new projects xref:basics#_projects_and_starters[in the previous {document}], so go check that out if the following steps are hard to follow.

. Create a new project using `enonic project create` and select the `Headless CMS Starter` option.
. Use the project name `{project-name}`.
. Select your destination folder (the default is fine) and accept the default project version.
. Use the sandbox we created earlier, `tutorial`.

To make sure that your new application is picked up correctly, run `enonic project deploy` and check that it shows up under http://localhost:8080/admin/tool/com.enonic.xp.app.applications/main[applications].

=== What if the application doesn't show up?

If the application doesn't show up under the Applications tab in XP after you've run `enonic project deploy`, check the logs (for the build first, and then for XP) for errors. The build might have failed or something may have gone wrong when deploying.

If the build works, but nothing shows up in the Applications tab, make sure you're running the right sandbox. The CLI deploys to the sandbox specified in the project's `.enonic` file (in the project directory root). This has to match the name of the sandbox that's running.

If you've checked that you're running the right sandbox and that the build succeeds, but you're still not seeing the application, you can do a manual deploy. The project build result is available in the `build/libs` directory of the project. You can copy this `.jar` file to the sandbox's `home/deploy` directory. This will make XP pick it up. If you've used the suggested names in the steps above (and the default directories for XP configuration), this command will move the file for you on Unix systems when run from the project root:

  mv build/libs/content-1.0.0-SNAPSHOT.jar ~/.enonic/sandboxes/tutorial/home/deploy/

NOTE: If you have to deploy manually when going through this tutorial, please get in touch on https://discuss.enonic.com[discuss.enonic.com] so we can improve the documentation and the process.

// This section walks the user through creating a new project using the headless starter. We've already created a project previously, so it needn't be _as_ detailed as previously, but should still provide all the necessary instructions.

// NOTE: Projects are a new feature in Content Studio, introduced in 7.3.0. They are not essential and for a small demo like this would probably cause more issues than they solve. However, it's probably worth sticking a note in here, telling the users that there is a more advanced concept called projects which is useful for working with multiple sites/contexts. We might explore this later.

// After creating the site, we'll see that there are no content types! The only things we can create are folders, shortcuts, sites, and template folders. We'll change that in the next section.

// Mention that content types belong to apps

== My first content type

This section gives a brief explanation of XP content types: what they are and how to create them. By doing this, it also introduces the directory structure of an XP app.

We'll keep it light for now and only introduce what we need.

After creating the content type, we'll open Content Studio and check it out + create an instance of the content type.

== Querying the API

Now that we've created some content, how about we try and query the API to see if we can fetch it?

Introduces the GraphQL API (and mentions that it's automatically generated by Guillotine) and how to use it.
