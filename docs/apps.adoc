= {title-apps}
include::.variables.adoc[]
:description: {description-apps}

Applications is the defacto way of adding functionality Enonic XP. Almost everything you'll be using and interacting with in Enonic is an app.

For instance, if you've followed along, you already have two apps installed and accessible through _XP menu_ on the dashboard.

NOTE: Not all installed apps will show on XP menu, this is something that is configured on app level.

To clarify on the previous claims, here are some examples of XP apps:

- If you want an interface to manage content, you can install https://market.enonic.com/vendors/enonic/content-studio[content studio app].

- If you want to use Enonic XP CMS in a headless way, you can install https://market.enonic.com/vendors/enonic/guillotine[guillotine app], and access the created content through a GraphQL API.

- Your project idea will most likely be an app.

In the end, apps are compiled and then _deployed_ to XP instances to be executed.

NOTE: {see-prev-docs}

== Starters

Creating a project from scratch can be a daunting task for any system you're not familiar with. To make things easier for you, Enonic provides a range of different templates (known as _starters_).

NOTE: The complete list of starters can be found on https://market.enonic.com/starters[the Enonic Market].

For our first app, we'll use the "Vanilla" starter. This starter contains the bare minimum. We'll use this to familiarize ourselves with how an XP app is structured and how to deploy it on your sandbox.

Here's how to use the CLI to create your first app:

. Make sure you are in the directory in which you want your project to be created and run:
+
[subs="attributes"]
[source,shell]
----
enonic project create --sb tutorial -r starter-vanilla -d {project-name} -v 1.0.0 -n com.example.{project-name}
----
+
. `--sb tutorial` links this project to the sandbox `tutorial`;
. `-r starter-vanilla` will create the project using start-vanilla starter as a base template;
. `-d {project-name}` will create the project in a folder named {project-name};
. `-v 1.0.0` will set the project version to `1.0.0`;
. `-n com.example.{project-name}` will set the project name to com.example.{project-name};
. Finally, you don't need to open the starter docs for now, so type `N` and press kbd:[Enter].

NOTE: Project names matter. XP does not support running two apps with the same name within a single instance.

A directory named `{project-name}/` should have been created during the process. If you used a different project name or project directory name, your directory will have a different name.

The project directory contains a fairly minimal XP application. The most relevant parts of the directory are:

.Essential XP project structure
[source,files]
----
build.gradle // <1>
gradle.properties // <2>
src/
  main/
    resources/ // <3>
----

<1> The main build file for defining dependencies and more build-related details.
<2> Contains the standard project settings, as defined by the CLI.
<3> The main project folder. JavaScript code and assets are placed here.

Each XP project is linked to one and only one sandbox. If you want to change the sandbox that a project is linked to, make sure to be in the root directory of your project and run the following command:

[source,shell]
----
enonic project sandbox
----

And then select the desired sandbox.

== Deploy your app

Now that we've set up a project, let's see how we build (or _compile_) and deploy the project to the sandbox. Again, the CLI is key to making this process as smooth as possible.

Here are the steps we need to take:

. Change to the project directory:
+
[subs="attributes"]
[source,shell]
----
cd {project-name}
----

+
. Start the deploying with Enonic CLI:
+
[source,shell]
----
enonic project dev
----

While deploying the project, the CLI will print what it's doing to your terminal. It will look something like this:

.Sample output from build process
[source,shell]
----
Building in sandbox 'tutorial'...
Starting a Gradle Daemon (subsequent builds will be faster)

BUILD SUCCESSFUL in 5s
3 actionable tasks: 3 executed
----

TIP: *Gradle got you worried?* Enonic uses Gradle to support other programming languages and tools beyond JavaScript. Just stay calm and continue the journey!

This copies the application .jar file to your sandbox's `home/deploy/` folder when changes are made. Since in this case we deployed `{project-name}.jar` into `tutorial` sandbox, we should expect that file to be on `~/.enonic/sandboxes/tutorial/home/deploy`.

NOTE: .enonic is the folder used by CLI to manage your sandboxes and Enonic XP distributions.

XP picks up on this automatically and starts the app for you. The `enonic project dev` command will automatically pick up changes and deploy your project.

NOTE: If you want to build or deploy your project manually, you can use the `enonic project build` and `enonic project deploy` commands.

To confirm that your application was started correctly, you can look at the logs in the sandbox's terminal window. They should say something like this:

[subs="attributes"]
[source,shell]
----
[...] - Local application [{project-name-full}] installed successfully
[...] - Application [{project-name-full}] started successfully
----

You can also verify that the application was installed correctly by using the admin console ({xp-url}): open the "Applications" app from the main launcher panel and look for your application in the list.

.The applications list with the vanilla starter installed
image::applications-vanilla.png["The applications list with a few applications installed. Also shows application details, such as content install time, version, and required XP system version for the selected application.", {image-xl}]

You've now successfully built and deployed your first Enonic XP application!

=== Changing the display name of an application
You might have noticed that the application we created was listed as "Vanilla Example" in the applications list above. What if you wanted to change that to something more descriptive? To do that, we can head to the `gradle.properties` file in the project's root directory. Change the `appDisplayName` to whatever you want it to display.

Similarly, you can change your application's description to something more appropriate at the file `src/main/resources/application.xml` by replacing the stock text inside of the `description` element.

After those changes, redeploy your app and revisit your http://localhost:8080/admin/tool/com.enonic.xp.app.applications/main[installed applications list]:

.Applications list with vanilla started updated
image::applications-vanilla-updated.png["The applications list with the recently installed vanilla started containing modifications on its display name and description.", {image-xl}]

=== What if the application doesn't show up?

If the application doesn't show up under the Applications tab in XP after you've run `enonic project deploy`, check the logs (for the build first, and then for XP) for errors. The build might have failed or something may have gone wrong when deploying.

If the build works, but nothing shows up in the Applications tab, make sure you're running the right sandbox. The CLI deploys to the sandbox specified during the project creation, and that's stored in the project's `.enonic` file, which is placed in the project directory root. This has to match the name of the sandbox that's running:

image::project-dot-enonic-file.png[".enonic file on the project root showing to which sandbox the project should be deployed to.", {image-xl}]

If the sandbox name on that file is not the one in which you wanted to deploy the project, you can directly change the sandbox name on that file and redeploy, or you can run `enonic project sandbox` in a terminal on the project root directory, to reconfigure the sandbox in which the project should be deploted to.

=== Manual deploying

If you've checked that you're running the right sandbox and that the deploy succeeded, but you're still not seeing the application, you can do a manual deploy.

The project build result is available in the `build/libs` directory of the project. You can copy this `.jar` file to the sandbox's `home/deploy` directory. This will make XP pick it up. If you've used the suggested names in the steps above (and the default directories for XP configuration), this command will move the file for you on Unix systems when run from the project root:

[source,shell,{subs}]
----
mv build/libs/{project-name}.jar ~/.enonic/sandboxes/tutorial/home/deploy/
----

NOTE: If you had to deploy manually when going through this tutorial, please get in touch on https://slack.enonic.com[the community slack] so we can improve the documentation and the process.
