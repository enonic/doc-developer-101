= {title-media}
include::variables.adoc[]
:image-folder: images

Naturally, XP can also store any files you would want to serve or associate with any data. This {document} explores how XP stores uploaded data and focuses on how its image tools work. At the end of a chapter we'll walk through how to use images in a headless fashion.

NOTE: {see-prev-docs} This {document} requires that you've got your site up and running.

== Media types

Media types are content types that ship with XP. When you upload a file to XP, XP will assign it one of the following media types based on the file's content:

Text (`media:text`)::
    Plain text files
Data (`media:data`)::
    Miscellaneous binary file formats
Audio (`media:audio`)::
    Audio files
Video (`media:video`)::
    Video files
Image (`media:image`)::
    Bitmap image files
Vector (`media:vector`)::
    Vector graphic files like `.svg`
Archive (`media:archive`)::
    File archives, such as `.zip`, `.tar` and `.jar`
Document (`media:document`)::
    Text documents with advanced formatting, such as `.doc`, `.odt` and `.pdf`
Spreadsheet (`media:spreadsheet`)::
    Spreadsheet files
Presentation (`media:presentation`)::
    Presentation files, such as Keynote and PowerPoint
Code (`media:code`)::
    Files with computer code, such as `.c`, `.pl` or `.java`
Executable (`media:executable`)::
    Executable application files
Unknown (`media:unknown`)::
    Everything else

To upload files to XP, use the _content selector_. You can associate content selectors with your own custom content types (more about this in the xref:input-types#_content_selector[{document on input types}]), or you can upload them directly through the "create content" dialog.

== Task: Uploading images

To get familiar with uploading media to XP, let's start with one of the most common media types on the web: images! This process will also allow you to upload any other media type.

For the purposes of this {document}, you should work with an image where the important part isn't centered in the shot. If you have one yourself, feel free to use that. If not, how about using https://unsplash.com/photos/8oLnCRz7hwM[this picture of a lion] by https://unsplash.com/@keyursphotography[Keyur Nandaniya]?

.A lion in brown grass
image::image-to-upload.jpg["A Lion relaxing in brown grass. The lion is in the lower left quadrant.",{image-xl}]

Once you have your image, create a folder and upload the image:

. Create an images folder and call it {image-folder}. Just like the "{content-type-1}" folder we created previously, place the folder directly under your site.
. Open the "create content" dialog. Press the upload button to bring up your OS's file browsing dialog and select your image. You can also drag and drop the image from your file system browser onto the dialog.

And that's all it takes to upload files to Content Studio!

== Editing images and setting focal points

Content Studio comes with a suite of image editing tools built in. After uploading an image to Content Studio, you can find it in the content grid and select it to bring up the image's content form.

.The image content form
image::image-content-form.png["A content form showing the image with image editing tools, inputs for caption, alternative text, copyright, and tags.",{image-xl}]

The content form allows you to provide an image caption, alt text, copyright and tag info. You can also add image properties such as dimensions, and where the image was taken and with what gear.

The image editing tools allow you to crop, flip, and rotate the image as well as to set what's known as _autofocus_. The autofocus control allows you to set an image focal point that XP will always keep in view, regardless of how the image is cropped. Without setting a focal point, XP will focus around the center of the image when cropping.

TIP: You can read more about https://enonic.com/blog/enonic-simplifies-image-problems[how Enonic simplifies your everyday image problems] to get more info about how to use images in a traditional CMS model and for a quick overview of the autofocus feature.

=== Task: Using autofocus

Because we chose an image with an off-center subject, the image might get cropped such that the lion disappears from the image. For instance, a small, square crop might turn out like this:

.Cropped image without focal point
image::image-cropped-unfocused.jpg["A crop of the lion in the savannah image. The image is square and the only part of the lion that is visible is part of its hind leg.",{image-s}]

To  get around this, try the autofocus tool. When you click it, a red circle will show up over the image. This circle indicates where the focal point is. Move the circle onto the lion and press "apply".

image::image-editing-focal-point.png["The lion image with a red circle indicating the focal point around its head.",{image-xl}]

Now, when the image gets cropped, XP will take care of keeping the lion in focus, both in traditional CMS solutions and in headless modes:

image::image-cropped-focused.jpg["A crop of the lion in the savannah. In this square image, the lion is in full view square in the center.",{image-s}]

== Media in Data Toolbox

Like we saw in the xref:content#_task_data_toolbox[{document} on content], Data Toolbox lets you view and edit your content. Images and other media are also available in Data Toolbox as content, but in addition to the same properties you saw previously, media also have a property called `attachment`. The attachment specifies the actual media file that you have uploaded.

For instance, if you have a look at the image you uploaded earlier, you should see that it points to the image file you uploaded. If you added a focal point, you'll see that specified under the `media` property too. If you view the content as JSON, some relevant parts of the structure are the `data` and `attachment` properties:

.An extract of the JSON representation of an image
[source,json]
----
// ....
  "data": {
    "media": {
      "attachment": "lion.jpg", <--.-->
      "focalPoint": { <--.-->
        "x": 0.246875,
        "y": 0.6653906106948853
      }
    }
  },
  "attachment": {
    "name": "lion.jpg", <--.-->
    "label": "source",
    "binary": "lion.jpg",
    "mimeType": "image/jpeg",
    "size": 256018,
    "text": ""
  }
// ....
----

<.> A reference to the attachment specified in the `attachment` property.
<.> The position of the focal point specified in the previous task.
<.> The image attachment with data about the file, such as MIME type and size.

== Headless: retrieving images

----
{
  guillotine {
    getChildren(
      key: "${site}/images") {
      displayName
      ... on media_Image {
        imageUrl(type: absolute, scale: "block(3000,200)")
      }
    }
  }
}
----
