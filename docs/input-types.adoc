= Input types
include::variables.adoc[]
:project-name: animals
:project-name-full: {project-name-prefix}{project-name}

In the previous {document}, we created a very simple content type and used it to create some content. However, in real world settings, you're likely to going to want to use more complex content types with different kinds of data (such as images). In this {document}  we'll be looking at some of the basic input types that come with XP and what we use them for.

At the end of the {document}, we'll put everything we've learned so far together.

== Key input types

Depending on your use case, you'll probably end up using a variety of input types. However, here are some of the ones you'll probably encounter most often:

=== TextLine

image::input-type-text-line.png[TextLine: A single-line input field., width=800]

 TextLine inputs are useful for short fields that contain text. They're also the only input type that has built-in validation. TextLine inputs support two forms of validation: max length and regular expressions. They can be used separately or together. The max length validation specifies that a user's input can not be longer than the specified value. The regular expression validation allows you to provide a custom regex that is used to validate the input field as you wish.

NOTE: XP uses JavaScript's regex engine to validate the input. For more information on what kind of of patterns it recognizes, see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#writing_a_regular_expression_pattern[MDN's documentation].

For example, an input that only allows between characters from `a` to `z` and requires between one and seventeen characters could look like this:

.A TextLine input type with
[source,xml]
----
<input name="validation-example" type="TextLine">
  <label>TextLine input validation example.</label>
    <config>
      <max-length>17<max-length>
      <regexp>^[a-fA-Z]+$</regexp>
    </config>
</input>
----

Further, if you want to provide a default value for a TextLine input, you can do that by using the `default` configuration option. For an example of how to do this and for more information on the TextLine input, visit the https://developer.enonic.com/docs/xp/stable/cms/input-types#textline[reference docs].


=== HtmlArea

image::input-type-html-area.png[HtmlArea: A rich text input field with visible formatting options., width=800]

While the TextLine input type is great for short inputs, it doesn't handle paragraphs of text very well, and it also doesn't provide any options for text formatting. For that, we have the HtmlArea.

The HtmlArea input type gives you a multi-line input field with rich formatting options, much like what you're used to from your favorite word processor. It supports text formatting and justification, lists, links, and even lets you insert images.

You can configure the HtmlArea to be exactly what you want by dictating what formatting tools to include or exclude (the `include` and `exclude` attributes, respectively), by what heading levels are allowed (`allowedHeadings`), and by giving it a default value (`default`).

To learn more about HtmlArea input type and how to configure all its options, check the https://developer.enonic.com/docs/xp/stable/cms/input-types#htmlarea[reference documentation for it]. A fully HtmlArea could look like this:

.An example HtmlArea input type
[source,xml]
----
<input name="myhtmlarea" type="HtmlArea">
  <label>My HtmlArea</label>
  <default><h3>Enter description here</h3></default>
  <config>
    <exclude>*</exclude>
    <include>JustifyLeft JustifyRight | Bold Italic</include>
    <allowHeadings>h2 h4 h6</allowHeadings>
  </config>
</input>
----

=== ImageSelector

image::input-type-image-selector.png[ImageSelector: An interactive image selection tool., width=800]

Images are a key part of many web experiences: they add color, break up the content, and gives the reader something to rest their eyes on. XP's image selector allows you to select an image for a piece of content and also to upload new images.

In XP, image selectors are great for when you want to associate one or more images with piece of content. For instance, if you're creating an API of animals, you might want to have an image of what each animal looks like both as a young and as an adult.

.An minimal ImageSelector configuration
[source,xml]
----
<input name="myimage" type="ImageSelector">
  <label>My Image</label>
</input>
----

The image selector is a more specialized form of XP's https://developer.enonic.com/docs/xp/stable/cms/input-types#contentselector[ContentSelector] input type. To read more about it, head over to https://developer.enonic.com/docs/xp/stable/cms/input-types#imageselector[the reference docs].

== Additional input types

We've seen some of the most important input types above, but XP has many more input types to offer. A https://developer.enonic.com/docs/xp/stable/cms/input-types#checkbox[CheckBox] allows you to indicate whether something is in one of two states (true or false), while the https://developer.enonic.com/docs/xp/stable/cms/input-types#combobox[ComboBox] lets you provide any number of predefined options for the user to select from.

If you need to indicate when and where something happened (or will happen), you should look into the https://developer.enonic.com/docs/xp/stable/cms/input-types#geopoint[GeoPoint] and https://developer.enonic.com/docs/xp/stable/cms/input-types#date[Date] and https://developer.enonic.com/docs/xp/stable/cms/input-types#datetime[DateTime] inputs. Try this for creating either a world history API or a live events API.

There's also inputs for selecting arbitrary content and for uploading attachments, for entering numbers, for adding tags, and more. For a full overview, check out the https://developer.enonic.com/docs/xp/stable/cms/input-types[input types reference docs].

== Input type configuration

In the work we did in the previous {document}, we did some very minor configuration of the input types. In the sections above, we have seen a little more of what you can do, such as adding validation and specifying what formatting features the user should get. This section gives a more thorough introduction to input type configuration.

=== Shared configuration options

All input types share a small number of configuration options. In the XML schema, these configuration options go directly under the `input` tag (that is: they're _not_ nested below the `config` tag). Additionally, each input element _must_ be given a `type` attribute and a `name` attribute. The `name` must be unique on the current level of the content type.

These are:

`label` (required):: What the input should be labeled as in the content form.
`occurrences` (optional):: Specifies whether this input is required to be filled out, and whether it's a list or not.
`default` (optional):: Gives a default value to the input.
`help-text` (optional):: Lets you specify a description of the input field to show to the user.
`config` (optional):: Input type-specific configuration. See the next section for more details.

All of these configuration options are described in more detail in the https://developer.enonic.com/docs/xp/stable/cms/schemas#input_types[input types schema documentation], so head over there for more information and explanation of how the various inputs work.

=== Input-specific configuration

Each input type also takes an optional `config` element for extra configuration. Because the input types are so different to each other, they all support different options. This is what allows us to use regex validation for TextLine inputs, configure formatting options for HtmlAreas, and what numeric values a Long or a Double input accepts.

To find out exactly what configuration options an input type accepts and how to configure it, visit https://developer.enonic.com/docs/xp/stable/cms/input-types[the input types documentation].

== Task: Create an {project-name} API

Time for a little recap! We'll use everything we've learned so far to create a new API. You can either try this out on your own or follow the solution below. The task is as follows:

Create a new XP application called "{project-name}".  Create an "animal" content type. It should have the following inputs:

. Its name, e.g. "elephant".
. A rich text input for adding a description of the animal. It should not allow the use of the `Image` formatting option.
. An image selector that accepts between 0 and 3 images.
. Add help text where you think it would be helpful.

Additionally, the content type should use the `display-name-expression` element to update the display name based on the name input field. We haven't looked at this element previously, but as the https://developer.enonic.com/docs/xp/stable/cms/content-types#display_name_expressions[documentation] explains, it's a way to auto-generate the content display name based on values from the content type form fields.

When you've created the content type, create a new site in Content Studio at the root level of the hierarchy. Call it "{project-name}" and use the "{project-name}" application. Enter some information to make sure it works and to test out the new input types.

=== Solution

We'll start by creating the application. We'll use the CLI for this and follow the same steps as we did in the previous {document}: follow the steps in the xref:content#_projects_and_starters[projects and starters section], but use {project-name-full} for the project name.

Next, we'll create the animal content type. In `src/main/resources/site/content-types/animal/animal.xml`, place the following content:

.The animal content type
[source,xml]
----
include::input_types_task.xml[]
----

<1>  This display name expression specifies that we want the content we create to have the same display name as whatever we put in the "name" input field.
<2> This help text explains what we want in the "name" field, in case the user wants more information.
<3> As mentioned in the task text, we don't want the user to be able add images to the "description" field.
<4> Using the `occurrences` element, we specify that the user can supply between zero and three images.

Because we'll have two applications using the same starter in our sandbox now, make sure you go and update the display name of the {project-name} project as described in xref:content#_changing_the_name_of_the_application[the section on changing your application's display name] from the previous {document}.

Now build and deploy your project to your sandbox as described in xref:content#_building_and_deploying[the building and deploying section], and create a new site at the root of the Content Studio hierarchy (see xref:content#_creating_a_site[the section on creating content in content studio for a refresher]).

Now create a piece of content that lives under the site and verify that the display name updates when you change the name field and that you can upload up to three images via the image selector.
